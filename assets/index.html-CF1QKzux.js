import{_ as i,c as a,a as e,o as n}from"./app-CO77B8re.js";const t="/yw-docs/assets/aLi-repository-CwUaJrQS.png",l="/yw-docs/assets/yyj-ns-BGKqUI7S.png",p="/yw-docs/assets/yyj-repository-Cl6bOoBD.png",h={};function r(d,s){return n(),a("div",null,s[0]||(s[0]=[e('<h3 id="将本地镜像发布到阿里云仓库" tabindex="-1"><a class="header-anchor" href="#将本地镜像发布到阿里云仓库"><span>将本地镜像发布到阿里云仓库</span></a></h3><p>本地镜像发布阿里云镜像仓库流程示意： <img src="'+t+'" alt="aLi-repository.png"></p><p>创建阿里云镜像仓库：</p><p>容器镜像服务--&gt;个人实例--&gt;命名空间--&gt;新建命名空间--&gt;新建仓库--&gt;获取相关脚本; <img src="'+l+'" alt="yyj-ns.png"></p><p>创建镜像仓库：</p><p><img src="'+p+`" alt="yyj-repository.png"></p><p>官方提供的脚本操作指南：</p><p>1、登录阿里云Docker Registry</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> login</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --username=yangjiaoshou20</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> crpi-xgro09dauuzaxuqh.cn-hangzhou.personal.cr.aliyuncs.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>用于登录的用户名为阿里云账号全名，密码为开通服务时设置的密码。</p><p>您可以在访问凭证页面修改凭证密码。</p><p>2、从Registry中拉取镜像</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> crpi-xgro09dauuzaxuqh.cn-hangzhou.personal.cr.aliyuncs.com/yyj-ns/yyj-repository:[镜像版本号]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>3、将镜像推送到Registry</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> login</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --username=yangjiaoshou20</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> crpi-xgro09dauuzaxuqh.cn-hangzhou.personal.cr.aliyuncs.com</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tag</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ImageId] crpi-xgro09dauuzaxuqh.cn-hangzhou.personal.cr.aliyuncs.com/yyj-ns/yyj-repository:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">镜像版本号</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> crpi-xgro09dauuzaxuqh.cn-hangzhou.personal.cr.aliyuncs.com/yyj-ns/yyj-repository:[镜像版本号]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请根据实际镜像信息替换示例中的[ImageId]和[镜像版本号]参数。</p><p>4、选择合适的镜像仓库地址</p><p>从ECS推送镜像时，可以选择使用镜像仓库内网地址。推送速度将得到提升并且将不会损耗您的公网流量。</p><p>如果您使用的机器位于VPC网络，请使用 crpi-xgro09dauuzaxuqh-vpc.cn-hangzhou.personal.cr.aliyuncs.com 作为Registry的域名登录。</p><p>5、示例</p><p>使用&quot;docker tag&quot;命令重命名镜像，并将它通过专有网络地址推送至Registry。</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> images</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">REPOSITORY</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                                         TAG</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                 IMAGE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ID</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">            CREATED</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">             VIRTUAL</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SIZE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">registry.aliyuncs.com/acs/agent</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                                    0.7-dfb6816</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         37bb9c63c8b2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> days</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ago</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">          37.89</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MB</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tag</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 37bb9c63c8b2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> crpi-xgro09dauuzaxuqh-vpc.cn-hangzhou.personal.cr.aliyuncs.com/acs/agent:0.7-dfb6816</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 &quot;docker push&quot; 命令将该镜像推送至远程。</p><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">$</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> docker</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> crpi-xgro09dauuzaxuqh-vpc.cn-hangzhou.personal.cr.aliyuncs.com/acs/agent:0.7-dfb6816</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,24)]))}const c=i(h,[["render",r],["__file","index.html.vue"]]),o=JSON.parse(`{"path":"/devops/repository/","title":"docker仓库","lang":"zh-CN","frontmatter":{"title":"docker仓库","createTime":"2025/02/26 22:03:44","permalink":"/devops/repository/","head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"]]},"headers":[{"level":3,"title":"将本地镜像发布到阿里云仓库","slug":"将本地镜像发布到阿里云仓库","link":"#将本地镜像发布到阿里云仓库","children":[]}],"readingTime":{"minutes":1.4,"words":420},"git":{"createdTime":1740582933000,"updatedTime":1740582933000,"contributors":[{"name":"yongjun","email":"1640808365@qq.com","commits":1}]},"filePathRelative":"notes/devops/docker/docker镜像仓库.md"}`);export{c as comp,o as data};
